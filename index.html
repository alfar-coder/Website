<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vefsíða</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="background-container">
        <div class="background-image"></div>
        <div class="overlay"></div>
    </div>

    <!-- Audio -->
    <audio id="stone-audio" preload="auto" src="Aphex Twin - Stone In Focus.mp3"></audio>

    <!-- Listen / Mute button (same style as footer email) -->
    <div class="audio-toggle">
        <button
            id="stone-toggle"
            class="footer-text audio-toggle-button"
            type="button"
            aria-label="Toggle music"
        >
            Listen
        </button>
    </div>

    <div class="content">
        <div class="main-frame">
            <div class="text-content">
                <span>I'm Álfar Smári — a designer from Iceland and co-founder of Manneskja. I build modern, </span><br>
                <span>considered interfaces for apps and websites, with a focus on clarity, simplicity, and tight attention to detail.</span>
            </div>
            
            <div class="links-container">
                <a href="https://manneskja.is"
                   class="link-link link-manneskja"
                   target="_blank"
                   rel="noopener noreferrer">
                    <span class="arrow">↳</span>
                    <span class="link-text">Manneskja</span>
                </a>
            
                <a href="https://www.instagram.com/alfars.is/"
                   class="link-link link-social-ig"
                   target="_blank"
                   rel="noopener noreferrer">
                    <span class="arrow">↳</span>
                    <span class="link-text">Instagram</span>
                </a>
            
                <a href="https://x.com/alfarsmari"
                   class="link-link link-social-x"
                   target="_blank"
                   rel="noopener noreferrer">
                    <span class="arrow">↳</span>
                    <span class="link-text">Twitter</span>
                </a>
            </div>
        </div>

        <div class="footer">
            <button class="footer-text footer-copy" id="email-copy-btn" aria-label="Copy email">
                alfar@manneskja.is
            </button>
            <div class="copy-pill" id="copy-pill" role="status" aria-live="polite">Copied</div>
        </div>
    </div>

    <script>
        // -------- Email copy logic --------
        const copyBtn = document.getElementById('email-copy-btn');
        const copyPill = document.getElementById('copy-pill');
        let copyTimeout;

        copyBtn.addEventListener('click', async () => {
            const email = copyBtn.textContent.trim();
            try {
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    await navigator.clipboard.writeText(email);
                } else {
                    const tempInput = document.createElement('input');
                    tempInput.value = email;
                    document.body.appendChild(tempInput);
                    tempInput.select();
                    document.execCommand('copy');
                    document.body.removeChild(tempInput);
                }

                copyPill.classList.add('visible');
                clearTimeout(copyTimeout);
                copyTimeout = setTimeout(() => {
                    copyPill.classList.remove('visible');
                }, 2000);
            } catch (err) {
                console.error('Copy failed', err);
            }
        });

        // -------- Stone In Focus player (Listen / Mute button) --------
        const stoneToggle = document.getElementById('stone-toggle');
        const stoneAudio = document.getElementById('stone-audio');
        let stonePlaying = false;

        function updateStoneLabel() {
            stoneToggle.textContent = stonePlaying ? 'Mute' : 'Listen';
        }

        stoneToggle.addEventListener('click', async () => {
            if (!stoneAudio) return;

            if (stonePlaying) {
                stoneAudio.pause();
                stonePlaying = false;
                updateStoneLabel();
            } else {
                try {
                    await stoneAudio.play();
                    stonePlaying = true;
                    updateStoneLabel();
                } catch (err) {
                    console.error('Audio play failed', err);
                }
            }
        });

        stoneAudio.addEventListener('ended', () => {
            stonePlaying = false;
            updateStoneLabel();
        });

        // Initial label
        updateStoneLabel();
    </script>
</body>
</html>
