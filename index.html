<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Álfar Smári — Designer</title>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <!-- Background -->
    <div class="background-container">
        <div class="background-image"></div>
        <div class="overlay"></div>
    </div>

    <!-- Audio -->
    <audio
        id="stone-audio"
        preload="auto"
        src="Aphex Twin - Stone In Focus.mp3"
    ></audio>

    <button
        class="circular-play"
        id="stone-toggle"
        type="button"
        aria-label="Play Stone In Focus"
    >
        ▸
    </button>

    <!-- Main content -->
    <div class="content">
        <div class="main-frame">
            <div class="text-content">
                <span>I'm Álfar Smári — a designer from Iceland and co-founder of Manneskja. I build modern, </span><br />
                <span>considered interfaces for apps and websites, with a focus on clarity, simplicity, and tight attention to detail.</span>
            </div>

            <div class="links-container">
                <a
                    href="https://manneskja.is"
                    class="link-link link-manneskja"
                    target="_blank"
                    rel="noopener noreferrer"
                >
                    <span class="arrow">↳</span>
                    <span class="link-text">Manneskja</span>
                </a>

                <a
                    href="https://instagram.com/YOURLINK"
                    class="link-link link-instagram"
                    target="_blank"
                    rel="noopener noreferrer"
                >
                    <span class="arrow">↳</span>
                    <span class="link-text">Instagram</span>
                </a>

                <a
                    href="https://x.com/YOURLINK"
                    class="link-link link-twitter"
                    target="_blank"
                    rel="noopener noreferrer"
                >
                    <span class="arrow">↳</span>
                    <span class="link-text">Twitter</span>
                </a>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <button
                class="footer-text footer-copy"
                id="email-copy-btn"
                type="button"
                aria-label="Copy email"
            >
                alfar@manneskja.is
            </button>
            <div
                class="copy-pill"
                id="copy-pill"
                role="status"
                aria-live="polite"
            >
                Copied
            </div>
        </div>
    </div>

    <script>
        window.addEventListener("DOMContentLoaded", () => {
            // Email copy
            const copyBtn = document.getElementById("email-copy-btn");
            const copyPill = document.getElementById("copy-pill");
            let copyTimeout;

            if (copyBtn && copyPill) {
                copyBtn.addEventListener("click", async () => {
                    const email = copyBtn.textContent.trim();
                    try {
                        await navigator.clipboard.writeText(email);
                        copyPill.classList.add("visible");
                        clearTimeout(copyTimeout);
                        copyTimeout = setTimeout(() => {
                            copyPill.classList.remove("visible");
                        }, 2000);
                    } catch (err) {
                        console.error("Copy failed", err);
                    }
                });
            }

            // Stone In Focus player
            const stoneBtn = document.getElementById("stone-toggle");
            const stoneAudio = document.getElementById("stone-audio");
            let stonePlaying = false;
            let triedAutoplay = false;

            function setStoneLabel(label) {
                if (stoneBtn) stoneBtn.textContent = label;
            }

            async function playStone() {
                if (!stoneAudio) return;
                try {
                    await stoneAudio.play();
                    stonePlaying = true;
                    setStoneLabel("■");
                } catch (err) {
                    console.error("Audio play failed", err);
                    setStoneLabel("!");
                }
            }

            if (stoneBtn && stoneAudio) {
                stoneBtn.addEventListener("click", async () => {
                    if (!stonePlaying) {
                        await playStone();
                    } else {
                        stoneAudio.pause();
                        stonePlaying = false;
                        setStoneLabel("▸");
                    }
                });

                async function tryAutoplay() {
                    if (triedAutoplay || stonePlaying) return;
                    triedAutoplay = true;
                    try {
                        await playStone();
                    } catch {
                        document.addEventListener(
                            "pointerdown",
                            resumeFromGesture,
                            { once: true }
                        );
                    }
                }

                async function resumeFromGesture() {
                    await playStone();
                }

                tryAutoplay();

                stoneAudio.addEventListener("ended", () => {
                    stonePlaying = false;
                    setStoneLabel("▸");
                });
            }
        });
    </script>
</body>
</html>
